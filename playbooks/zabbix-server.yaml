  - hosts: zabbix-servers
    become: true

    roles:
      - role: users
      - role: bash
      - role: geerlingguy.repo-epel
        when: ansible_os_family == "RedHat"
      - geerlingguy.mysql
      - geerlingguy.apache
      - geerlingguy.php
      - community.zabbix.zabbix_server
      - community.zabbix.zabbix_web
      - community.zabbix.zabbix_agent
      - role: zabbix-post
        tags: ["zabbix-post"]
  
  # TODO:
  # /etc/httpd/conf.d/welcome.conf - manage in a file with only a comment saying "Managed by Ansible, don't update" or whatever
  # /etc/httpd/conf.d/ssl.conf - more complex, as this already has a default virtualhost. either change the file to suit Zabbix, or remove the virtualhost.
  ### the main issue is that this file has Listen 443 https which is kinda important...

  # before dumping more time into this, spin up a second VM guest and try to deploy the zabbix agent role only. then add it for monitoring.