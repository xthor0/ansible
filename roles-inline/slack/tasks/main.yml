---
- name: install Slack DEB
  apt:
    deb: "https://downloads.slack-edge.com/releases/linux/4.27.156/prod/x64/slack-desktop-4.27.156-amd64.deb"
  become: true 
  when: ansible_os_family == "Debian"

- name: add gpg yum keys for slack
  rpm_key:
    key: https://slack.com/gpg/slack_pubkey_2019.gpg
    state: present
  become: true
  when: ansible_os_family == "RedHat"

- name: install Slack RPM
  yum:
    name: https://downloads.slack-edge.com/releases/linux/4.27.156/prod/x64/slack-4.27.156-0.1.fc21.x86_64.rpm
  become: true
  when: ansible_os_family == "RedHat"

- name: start Slack on login
  copy:
    src: files/slack.desktop
    dest: ~/.config/autostart/slack.desktop
